<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Python &mdash; MyKnowledge MyKnowledge 文档</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/translations.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="prev" title="数字电路" href="%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> MyKnowledge
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="%E7%94%B5%E8%B7%AF%E5%8E%9F%E7%90%86.html">电路原理</a></li>
<li class="toctree-l1"><a class="reference internal" href="%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF.html">数字电路</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Python</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#fitz">fitz</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pdf">图片转PDF</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#matplotlib">matplotlib</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">显示方式</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id2">文字显示</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">线条样式</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">坐标轴</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">图形标签</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id6">多列柱状图</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#numpy">numpy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id7">基本数学运算</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">数据类型转换</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#scipy">scipy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id9">最小二乘法拟合</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id10">非线性方程组求解</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#sphinx">Sphinx</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id11">快速新建项目</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MyKnowledge</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Python</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/demo/Python.rst.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="python">
<h1>Python<a class="headerlink" href="#python" title="此标题的永久链接"></a></h1>
<section id="fitz">
<h2>fitz<a class="headerlink" href="#fitz" title="此标题的永久链接"></a></h2>
<section id="pdf">
<h3>图片转PDF<a class="headerlink" href="#pdf" title="此标题的永久链接"></a></h3>
<p>下面的代码能够实现将目标文件夹内的同类型图片按顺序合并为一个PDF文件。需要导入 <code class="code docutils literal notranslate"><span class="pre">import</span> <span class="pre">fitz</span></code> ， <code class="code docutils literal notranslate"><span class="pre">import</span> <span class="pre">os</span></code> ， <code class="code docutils literal notranslate"><span class="pre">import</span> <span class="pre">re</span></code> 。该函数代码需要传入图片所在目录、图片类型、合并PDF的名称。下面是一个示例：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">img_path</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;C:\Users\25281\Desktop\工作文件\学校相关资料\课程相关\大二上\电路原理\作业\第6周&#39;</span>
<span class="n">imgType</span> <span class="o">=</span> <span class="s1">&#39;.jpg&#39;</span>
<span class="n">combined_pdf_name</span> <span class="o">=</span> <span class="s1">&#39;06电路原理.pdf&#39;</span>
</pre></div>
</div>
<p>具体实现的函数代码如下：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">img_to_pdf</span><span class="p">(</span><span class="n">img_path</span><span class="p">,</span> <span class="n">imgType</span><span class="p">,</span> <span class="n">combined_pdf_name</span><span class="p">):</span>
    <span class="n">doc</span> <span class="o">=</span> <span class="n">fitz</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>  <span class="c1"># 打开一个用于存放pdf信息的空doc</span>

    <span class="k">for</span> <span class="n">fileName_in_img_path</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">img_path</span><span class="p">):</span>  <span class="c1"># 从目录中依次获取每一个文件名</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(?P&lt;imgName&gt;.*?)</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">imgType</span><span class="p">),</span> <span class="n">re</span><span class="o">.</span><span class="n">S</span><span class="p">)</span>  <span class="c1"># 正则表达式寻找.png后缀的文件</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="n">fileName_in_img_path</span><span class="p">)</span>  <span class="c1"># 将目录名放入匹配器，并将匹配结果的迭代器存储到result变量中</span>
        <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>  <span class="c1"># 从迭代器里面获取img文件名进行操作</span>
            <span class="n">imgName</span> <span class="o">=</span> <span class="n">it</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;imgName&#39;</span><span class="p">)</span>  <span class="c1"># 获取png文件名</span>
            <span class="n">img_file</span> <span class="o">=</span> <span class="n">img_path</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">imgName</span> <span class="o">+</span> <span class="n">imgType</span>  <span class="c1"># 获取完整的img文件路径</span>
            <span class="n">imgdoc</span> <span class="o">=</span> <span class="n">fitz</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">img_file</span><span class="p">)</span>  <span class="c1"># 打开img文件获取图片数据</span>
            <span class="n">pdfbytes</span> <span class="o">=</span> <span class="n">imgdoc</span><span class="o">.</span><span class="n">convert_to_pdf</span><span class="p">()</span>  <span class="c1"># 将图片数据转换为pdf格式数据</span>
            <span class="n">subPDF_name</span> <span class="o">=</span> <span class="n">imgName</span> <span class="o">+</span> <span class="s1">&#39;.pdf&#39;</span>  <span class="c1"># 获取子pdf文件名，以原img文件名字命名</span>
            <span class="n">imgpdf</span> <span class="o">=</span> <span class="n">fitz</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">subPDF_name</span><span class="p">,</span> <span class="n">pdfbytes</span><span class="p">)</span>  <span class="c1"># 将子pdf文件名与pdf格式数据打开为pdf文件</span>
            <span class="n">doc</span><span class="o">.</span><span class="n">insert_pdf</span><span class="p">(</span><span class="n">imgpdf</span><span class="p">)</span>  <span class="c1"># 将上述pdf文件插入到doc当中</span>

    <span class="n">doc_position</span> <span class="o">=</span> <span class="n">img_path</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">combined_pdf_name</span>
    <span class="n">doc</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">doc_position</span><span class="p">)</span>  <span class="c1"># 将doc保存到目标路径</span>
    <span class="n">doc</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span>
</pre></div>
</div>
</section>
</section>
<section id="matplotlib">
<h2>matplotlib<a class="headerlink" href="#matplotlib" title="此标题的永久链接"></a></h2>
<section id="id1">
<h3>显示方式<a class="headerlink" href="#id1" title="此标题的永久链接"></a></h3>
<section id="id2">
<h4>文字显示<a class="headerlink" href="#id2" title="此标题的永久链接"></a></h4>
<p>要想让matplotlib生成的图表支持中文，需要加入以下代码：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;font.sans-serif&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;SimHei&#39;</span><span class="p">]</span>  <span class="c1"># 中文</span>
</pre></div>
</div>
<p>要想让matplotlib生成的图表正常显示负号，需要加入以下代码：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.unicode_minus&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>    <span class="c1"># 显示负号</span>
</pre></div>
</div>
</section>
<section id="id3">
<h4>线条样式<a class="headerlink" href="#id3" title="此标题的永久链接"></a></h4>
<p>使用 <code class="code docutils literal notranslate"><span class="pre">plt.style.available</span></code> 输出matplotlib提供的所有风格名称，共计26种（已经导入 <code class="code docutils literal notranslate"><span class="pre">import</span> <span class="pre">matplotlib.pyplot</span> <span class="pre">as</span> <span class="pre">plt</span></code> ）。要使用某种预设的样式时，只需要像如下方式调用即可：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;ggplot&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>如果需要调整 <strong>线条的颜色</strong> ，可以修改 <code class="code docutils literal notranslate"><span class="pre">plt.plot()</span></code> 函数的 <code class="code docutils literal notranslate"><span class="pre">color</span></code> 参数。有下面几种方式来进行赋值：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">0</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">)</span> <span class="c1"># 标准颜色名称</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;g&#39;</span><span class="p">)</span> <span class="c1"># 缩写颜色代码（rgbcmyk）</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">2</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;0.75&#39;</span><span class="p">)</span> <span class="c1"># 范围在0~1的灰度值</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">3</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#FFDD44&#39;</span><span class="p">)</span> <span class="c1"># 十六进制（RRGGBB，00~FF）</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">4</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mf">0.3</span><span class="p">))</span> <span class="c1"># RGB元组，范围在0~1</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">5</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;chartreuse&#39;</span><span class="p">);</span> <span class="c1"># HTML颜色名称</span>
</pre></div>
</div>
<p>也有一些常用颜色的缩写可以直接赋值使用：</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 27%" />
<col style="width: 27%" />
<col style="width: 45%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字符</p></th>
<th class="head"><p>颜色</p></th>
<th class="head"><p>英文全称</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‘b’</p></td>
<td><p>蓝色</p></td>
<td><p>blue</p></td>
</tr>
<tr class="row-odd"><td><p>‘g’</p></td>
<td><p>绿色</p></td>
<td><p>green</p></td>
</tr>
<tr class="row-even"><td><p>‘r’</p></td>
<td><p>红色</p></td>
<td><p>red</p></td>
</tr>
<tr class="row-odd"><td><p>‘c’</p></td>
<td><p>青色</p></td>
<td><p>cyan</p></td>
</tr>
<tr class="row-even"><td><p>‘m’</p></td>
<td><p>品红</p></td>
<td><p>magenta</p></td>
</tr>
<tr class="row-odd"><td><p>‘y’</p></td>
<td><p>黄色</p></td>
<td><p>yellow</p></td>
</tr>
<tr class="row-even"><td><p>‘k’</p></td>
<td><p>黑色</p></td>
<td><p>black</p></td>
</tr>
<tr class="row-odd"><td><p>‘w’</p></td>
<td><p>白色</p></td>
<td><p>white</p></td>
</tr>
</tbody>
</table>
<p>如果需要调整 <strong>线条样式</strong> ，可以修改 <code class="code docutils literal notranslate"><span class="pre">linestyle</span></code> 参数。下面是一些常见的线条样式。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 19%" />
<col style="width: 25%" />
<col style="width: 19%" />
<col style="width: 38%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字符</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>字符</p></th>
<th class="head"><p>类型</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‘-’</p></td>
<td><p>实线</p></td>
<td><p>‘2’</p></td>
<td><p>上三叉点</p></td>
</tr>
<tr class="row-odd"><td><p>‘-.’</p></td>
<td><p>虚点线</p></td>
<td><p>‘4’</p></td>
<td><p>右三叉点</p></td>
</tr>
<tr class="row-even"><td><p>‘.’</p></td>
<td><p>点</p></td>
<td><p>‘1’</p></td>
<td><p>下三叉点</p></td>
</tr>
<tr class="row-odd"><td><p>‘o’</p></td>
<td><p>圆点</p></td>
<td><p>‘3’</p></td>
<td><p>左三叉点</p></td>
</tr>
<tr class="row-even"><td><p>‘_’</p></td>
<td><p>横线点</p></td>
<td><p>‘D’</p></td>
<td><p>实心菱形点</p></td>
</tr>
<tr class="row-odd"><td><p>‘*’</p></td>
<td><p>星型点</p></td>
<td><p>‘h’</p></td>
<td><p>六边形点</p></td>
</tr>
<tr class="row-even"><td><p>‘__’</p></td>
<td><p>虚线</p></td>
<td><p>‘^’</p></td>
<td><p>上三角形</p></td>
</tr>
<tr class="row-odd"><td><p>‘:’</p></td>
<td><p>点线</p></td>
<td><p>‘&gt;’</p></td>
<td><p>右三角形</p></td>
</tr>
<tr class="row-even"><td><p>‘+’</p></td>
<td><p>加号点</p></td>
<td><p>‘v’</p></td>
<td><p>下三角形</p></td>
</tr>
<tr class="row-odd"><td><p>‘x’</p></td>
<td><p>乘号点</p></td>
<td><p>‘&lt;’</p></td>
<td><p>左三角形</p></td>
</tr>
<tr class="row-even"><td><p>‘p’</p></td>
<td><p>五角点</p></td>
<td><p>‘s’</p></td>
<td><p>正方点</p></td>
</tr>
<tr class="row-odd"><td><p>‘,’</p></td>
<td><p>像素点</p></td>
<td><p>‘d’</p></td>
<td><p>瘦菱形点</p></td>
</tr>
</tbody>
</table>
<p>如果需要修改 <strong>线条宽度</strong> ，可以使用 <code class="code docutils literal notranslate"><span class="pre">linewidth</span></code> 参数来修改线条的粗细。默认情况下， <code class="code docutils literal notranslate"><span class="pre">linewidth</span></code> 设置为1个单位。利用线条的粗细可以在视觉上强调某条特定的曲线。</p>
</section>
<section id="id4">
<h4>坐标轴<a class="headerlink" href="#id4" title="此标题的永久链接"></a></h4>
<p>如果希望自定义 <strong>坐标轴上下限</strong> ，最基础的方法是 <code class="code docutils literal notranslate"><span class="pre">plt.xlim()</span></code> 和 <code class="code docutils literal notranslate"><span class="pre">plt.ylim()</span></code> ，例如</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">)</span>
</pre></div>
</div>
<p>如果你想要让 <strong>坐标轴逆序显示</strong> ，那么也可以逆序设置坐标轴刻度值，例如</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mf">1.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.2</span><span class="p">)</span>
</pre></div>
</div>
<p>还有一个方法是 <code class="code docutils literal notranslate"><span class="pre">plt.axis()</span></code> 。通过传入 <code class="code docutils literal notranslate"><span class="pre">[xmin,</span> <span class="pre">xmax,</span> <span class="pre">ymin,</span> <span class="pre">ymax]</span></code> 对应的值，可以只用一行代码就设置好x和y的限值：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">])</span>
</pre></div>
</div>
<p>还可以用 <code class="code docutils literal notranslate"><span class="pre">plt.axis('tight')</span></code> 按照图形的内容 <strong>自动收紧坐标轴</strong> ，不留空白区域；使用 <code class="code docutils literal notranslate"><span class="pre">plt.axis('equal')</span></code> 让屏幕上显示的图形分辨率为1:1， <strong>x轴单位长度与y轴单位长度相等</strong> 。</p>
<p>如果希望将原本的浮点数显示转变为 <strong>百分数显示</strong> 在坐标轴刻度，可以使用FuncFormatter函数。需要导入 <code class="code docutils literal notranslate"><span class="pre">from</span> <span class="pre">matplotlib.ticker</span> <span class="pre">import</span> <span class="pre">FuncFormatter</span></code> 。首先自定义转换浮点数为百分数刻度显示的函数：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">to_percent</span><span class="p">(</span><span class="n">temp</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    用来将坐标轴的浮点数转换为百分比显示</span>
<span class="sd">    :param temp: 坐标轴数据，一般由plt.gca().yaxis.set_major_formatter自动提供</span>
<span class="sd">    :param position: 显示位置，一般由plt.gca().yaxis.set_major_formatter自动提供</span>
<span class="sd">    :return: 百分比显示的str文字</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%1.0f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="n">temp</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;%&#39;</span>
</pre></div>
</div>
<p>之后只需要在绘图代码中利用 <code class="code docutils literal notranslate"><span class="pre">plt.gca()</span></code> 修改对应坐标轴的显示格式即可。例如</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">FuncFormatter</span><span class="p">(</span><span class="n">to_percent</span><span class="p">))</span>  <span class="c1"># 将y轴原本的浮点数转换为百分比显示</span>
</pre></div>
</div>
</section>
<section id="id5">
<h4>图形标签<a class="headerlink" href="#id5" title="此标题的永久链接"></a></h4>
<p>图形标题与坐标轴标题是最简单的标签，快速设置方法如下所示</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;A Sine Curve&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;sin(x)&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>在单个坐标轴上显示多条线时，创建图例显示每条线是很有效的方法。Matplotlib 内置了 <code class="code docutils literal notranslate"><span class="pre">plt.legend()</span></code> 用来创建图例，例如</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="s1">&#39;-g&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;sin(x)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="s1">&#39;:b&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;cos(x)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="id6">
<h3>多列柱状图<a class="headerlink" href="#id6" title="此标题的永久链接"></a></h3>
<p>下面给出一个通用的创建多列柱状图的函数代码。它要求分别传入x轴标签、柱状形标签和二维数据数组。这些内容都通过列表来记录，如果不希望产生柱状形标签，那么就传入一个空列表。例如下面是一个5组4列柱状图的数据集</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">xlabels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;G1&#39;</span><span class="p">,</span> <span class="s1">&#39;G2&#39;</span><span class="p">,</span> <span class="s1">&#39;G3&#39;</span><span class="p">,</span> <span class="s1">&#39;G4&#39;</span><span class="p">,</span> <span class="s1">&#39;G5&#39;</span><span class="p">]</span>
<span class="n">bar_labels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="s1">&#39;4&#39;</span><span class="p">]</span>
<span class="n">first</span> <span class="o">=</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">27</span><span class="p">]</span>
<span class="n">second</span> <span class="o">=</span> <span class="p">[</span><span class="mi">25</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">]</span>
<span class="n">third</span> <span class="o">=</span> <span class="p">[</span><span class="mi">21</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">28</span><span class="p">]</span>
<span class="n">fourth</span> <span class="o">=</span> <span class="p">[</span><span class="mi">26</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">21</span><span class="p">]</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">first</span><span class="p">,</span> <span class="n">second</span><span class="p">,</span> <span class="n">third</span><span class="p">,</span> <span class="n">fourth</span><span class="p">]</span>
</pre></div>
</div>
<p>具体的绘图函数代码如下（已经导入 <code class="code docutils literal notranslate"><span class="pre">import</span> <span class="pre">matplotlib.pyplot</span> <span class="pre">as</span> <span class="pre">plt</span></code> 和 <code class="code docutils literal notranslate"><span class="pre">import</span> <span class="pre">numpy</span> <span class="pre">as</span> <span class="pre">np</span></code> ）。可以根据需要调整每组柱子之间的空隙、y轴标签、生成图片的文件名。如果希望生成图表标题，可以加入 <code class="code docutils literal notranslate"><span class="pre">plt.title('my</span> <span class="pre">title')</span></code> 。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">create_multi_bars</span><span class="p">(</span><span class="n">xlabels</span><span class="p">,</span> <span class="n">bar_labels</span><span class="p">,</span> <span class="n">datas</span><span class="p">,</span> <span class="n">tick_step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">group_gap</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">bar_gap</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    xlabels : x轴坐标标签序列</span>
<span class="sd">    bar_labels : 一组中各柱子的图例</span>
<span class="sd">    datas ：数据集，二维列表，要求列表每个元素的长度必须与labels的长度一致</span>
<span class="sd">    tick_step ：默认x轴刻度步长为1，通过tick_step可调整x轴刻度步长。</span>
<span class="sd">    group_gap : 柱子组与组之间的间隙，最好为正值，否则组与组之间重叠</span>
<span class="sd">    bar_gap ：每组柱子之间的空隙，默认为0，每组柱子紧挨，正值每组柱子之间有间隙，负值每组柱子之间重叠</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ticks</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">xlabels</span><span class="p">))</span> <span class="o">*</span> <span class="n">tick_step</span>  <span class="c1"># ticks为x轴刻度</span>
    <span class="n">group_num</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">datas</span><span class="p">)</span>  <span class="c1"># group_num为数据的组数，即每组柱子的柱子个数</span>
    <span class="n">group_width</span> <span class="o">=</span> <span class="n">tick_step</span> <span class="o">-</span> <span class="n">group_gap</span>  <span class="c1"># group_width为每组柱子的总宽度，group_gap 为柱子组与组之间的间隙。</span>
    <span class="n">bar_span</span> <span class="o">=</span> <span class="n">group_width</span> <span class="o">/</span> <span class="n">group_num</span>  <span class="c1"># bar_span为每组柱子之间在x轴上的距离，即柱子宽度和间隙的总和</span>
    <span class="n">bar_width</span> <span class="o">=</span> <span class="n">bar_span</span> <span class="o">-</span> <span class="n">bar_gap</span>  <span class="c1"># bar_width为每个柱子的实际宽度</span>

    <span class="c1"># baseline_x为每组柱子第一个柱子的基准x轴位置，随后的柱子依次递增bar_span即可</span>
    <span class="n">baseline_x</span> <span class="o">=</span> <span class="n">ticks</span> <span class="o">-</span> <span class="p">(</span><span class="n">group_width</span> <span class="o">-</span> <span class="n">bar_span</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">datas</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">baseline_x</span> <span class="o">+</span> <span class="n">index</span> <span class="o">*</span> <span class="n">bar_span</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">bar_width</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">bar_labels</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>  <span class="c1"># 设置各柱形图例</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Scores&#39;</span><span class="p">)</span>  <span class="c1"># 设置y轴标签</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">ticks</span><span class="p">,</span> <span class="n">xlabels</span><span class="p">)</span>  <span class="c1"># x轴刻度标签位置与x轴刻度一致</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;test.png&#39;</span><span class="p">)</span>
    <span class="k">return</span>
</pre></div>
</div>
</section>
</section>
<section id="numpy">
<h2>numpy<a class="headerlink" href="#numpy" title="此标题的永久链接"></a></h2>
<p>numpy模块一般的导入方式都是 <code class="code docutils literal notranslate"><span class="pre">import</span> <span class="pre">numpy</span> <span class="pre">as</span> <span class="pre">np</span></code> 。</p>
<section id="id7">
<h3>基本数学运算<a class="headerlink" href="#id7" title="此标题的永久链接"></a></h3>
<p>numpy提供了各种三角函数。例如 <code class="code docutils literal notranslate"><span class="pre">np.sin()</span></code> ， <code class="code docutils literal notranslate"><span class="pre">np.cos()</span></code> ， <code class="code docutils literal notranslate"><span class="pre">np.tan()</span></code> ， <code class="code docutils literal notranslate"><span class="pre">np.arcsin()</span></code> ， <code class="code docutils literal notranslate"><span class="pre">np.arccos()</span></code> ， <code class="code docutils literal notranslate"><span class="pre">np.arctan()</span></code> 。需要注意的是，这些三角函数的计算内容应该是弧度制，所以对于以角度为单位的数 <code class="code docutils literal notranslate"><span class="pre">degree</span></code> ，需要通过 <code class="code docutils literal notranslate"><span class="pre">degree*np.pi/180</span></code> 来将角度转换为弧度。而弧度可以利用 <code class="code docutils literal notranslate"><span class="pre">np.degrees()</span></code> 函数来将其转换为角度。</p>
<p>在指数运算方面，numpy提供了自然常数e为底的指数函数 <code class="code docutils literal notranslate"><span class="pre">np.exp()</span></code> ，一般的指数计算可以使用 <code class="code docutils literal notranslate"><span class="pre">np.power(a,</span> <span class="pre">b)</span></code> 来计算 <span class="math notranslate nohighlight">\(a^{b}\)</span> 。</p>
<p>在对数运算方面，nump提供了自然常数e为底的对数函数 <code class="code docutils literal notranslate"><span class="pre">np.log()</span></code> 和以10为底的对数函数 <code class="code docutils literal notranslate"><span class="pre">np.log10()</span></code> 。</p>
</section>
<section id="id8">
<h3>数据类型转换<a class="headerlink" href="#id8" title="此标题的永久链接"></a></h3>
<p>numpy数据类型转换需要调用方法 <code class="code docutils literal notranslate"><span class="pre">astype()</span></code> ，例如 <code class="code docutils literal notranslate"><span class="pre">np.array(x).astype(int)</span></code> 。调用astype返回进行了数据类型修改后的数据，但是源数据的类型不会变，需要进一步对源数据的使用dtype进行操作才能改变，例如 <code class="code docutils literal notranslate"><span class="pre">a.astype(np.int16)</span></code> 。但是，没有使用astype而直接修改dtype数据会强制用新数据类型表示，将会导致输出错误数据。</p>
</section>
</section>
<section id="scipy">
<h2>scipy<a class="headerlink" href="#scipy" title="此标题的永久链接"></a></h2>
<section id="id9">
<h3>最小二乘法拟合<a class="headerlink" href="#id9" title="此标题的永久链接"></a></h3>
<p>最小二乘法的数学原理就是使下面公式中的 <span class="math notranslate nohighlight">\(S\)</span> 最小。其中的 <span class="math notranslate nohighlight">\(p\)</span> 表示拟合函数 <span class="math notranslate nohighlight">\(f\)</span> 的所有参数集合。</p>
<div class="math notranslate nohighlight">
\[\begin{align}
S(p)=\sum_{i=1}^{m}[y_{i}-f(x_{i},p)]^{2}
\end{align}\]</div>
<p>scipy中的子函数库optimize已经提供了实现最小二乘拟合算法的函数leastsq。需要导入 <code class="code docutils literal notranslate"><span class="pre">import</span> <span class="pre">numpy</span> <span class="pre">as</span> <span class="pre">np</span></code> 和 <code class="code docutils literal notranslate"><span class="pre">from</span> <span class="pre">scipy.optimize</span> <span class="pre">import</span> <span class="pre">leastsq</span></code> 。</p>
<p>首先要获取用于拟合的数据。作为测试，下面使用真实函数数据与噪声组合的方式来获取用于拟合的数据，数据集要以列表或数组的形式存在。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">A</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">theta</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="mf">0.34</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">6</span> <span class="c1"># 真实数据的函数参数</span>
<span class="n">y0</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="p">[</span><span class="n">A</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">theta</span><span class="p">])</span> <span class="c1"># 真实数据</span>
<span class="n">y1</span> <span class="o">=</span> <span class="n">y0</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="c1"># 加入噪声之后的实验数据</span>
</pre></div>
</div>
<p>接下来要自定义拟合函数和残差计算函数。例如下面的拟合函数为 <span class="math notranslate nohighlight">\(A\sin(2\pi kx+\theta)\)</span> ，拟合参数 <span class="math notranslate nohighlight">\(p\)</span> 包括 <span class="math notranslate nohighlight">\(A,k,\theta\)</span> 。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    数据拟合所用的函数: A*sin(2*pi*k*x + theta)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">A</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">theta</span> <span class="o">=</span> <span class="n">p</span>
    <span class="k">return</span> <span class="n">A</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">k</span><span class="o">*</span><span class="n">x</span><span class="o">+</span><span class="n">theta</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">residuals</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    实验数据x, y和拟合函数之间的差，p为拟合需要找到的系数</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">y</span> <span class="o">-</span> <span class="n">func</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
<p>接下来开始进行最小二乘法拟合。首先需要自行猜测一组参数，在这个例子里就可以如下猜测：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">p0</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="c1"># 第一次猜测的函数拟合参数</span>
</pre></div>
</div>
<p>之后就开始调用leastsq进行数据拟合，分别传入计算误差的函数、猜测的拟合参数和需要拟合的实验数据：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plsq</span> <span class="o">=</span> <span class="n">leastsq</span><span class="p">(</span><span class="n">residuals</span><span class="p">,</span> <span class="n">p0</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
<p>调用成功后，通过 <code class="code docutils literal notranslate"><span class="pre">plsq[0]</span></code> 就可以获得拟合参数的列表。如果需要进行拟合曲线绘制，只需要plot即可。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">func</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">plsq</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;拟合曲线&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>如果需要求 <strong>决定系数</strong> ，可以使用下面的函数代码。需要依次传入实际y数据、拟合y数据。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_R2</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">y_fit</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    <span class="n">y_fit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">y_fit</span><span class="p">)</span>

    <span class="n">SSE</span> <span class="o">=</span> <span class="p">((</span><span class="n">y</span> <span class="o">-</span> <span class="n">y_fit</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">SST</span> <span class="o">=</span> <span class="p">((</span><span class="n">y</span> <span class="o">-</span> <span class="n">y</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

    <span class="n">R2</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">SSE</span> <span class="o">/</span> <span class="n">SST</span>
    <span class="k">return</span> <span class="n">R2</span>
</pre></div>
</div>
</section>
<section id="id10">
<h3>非线性方程组求解<a class="headerlink" href="#id10" title="此标题的永久链接"></a></h3>
<p>optimize库中的fsolve函数可以用来对非线性方程组进行求解，需要导入 <code class="code docutils literal notranslate"><span class="pre">from</span> <span class="pre">scipy.optimize</span> <span class="pre">import</span> <span class="pre">fsolve</span></code> 。它进行的数学计算逻辑如下，其中 <span class="math notranslate nohighlight">\(f\)</span> 是方程组函数， <span class="math notranslate nohighlight">\(X\)</span> 是未知数矢量。求未知数即是需要找到能令方程组计算误差趋于零的参数。</p>
<div class="math notranslate nohighlight">
\[\begin{align}
f(X) &amp; = 0
\end{align}\]</div>
<p>首先要自定义函数来表示方程组及方程组计算的误差。下面以如下的含有三个未知数的非线性方程组为例（已经导入了 <code class="code docutils literal notranslate"><span class="pre">from</span> <span class="pre">math</span> <span class="pre">import</span> <span class="pre">sin,cos</span></code> ）：</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align}
5x_{1}+3 &amp; = 0 \\
4x_{0}^{2}-2\sin(x_{1}\cdot x_{2}) &amp;=0 \\
x_{1}\cdot x_{2} - 1.5 &amp;= 0
\end{align}\end{split}\]</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">x0</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">x1</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">x2</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="mi">5</span><span class="o">*</span><span class="n">x1</span><span class="o">+</span><span class="mi">3</span><span class="p">,</span>
        <span class="mi">4</span><span class="o">*</span><span class="n">x0</span><span class="o">*</span><span class="n">x0</span> <span class="o">-</span> <span class="mi">2</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">x1</span><span class="o">*</span><span class="n">x2</span><span class="p">),</span>
        <span class="n">x1</span><span class="o">*</span><span class="n">x2</span> <span class="o">-</span> <span class="mf">1.5</span>
    <span class="p">]</span>
</pre></div>
</div>
<p>之后只需要直接调用fsolve函数即可。需要传入一组试验未知数参数，这里用的试验参数是 <code class="code docutils literal notranslate"><span class="pre">[1,1,1]</span></code> 。返回的result就是以列表形式储存的参数向量。可以用 <code class="code docutils literal notranslate"><span class="pre">func(result)</span></code> 来检查误差情况。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">fsolve</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<p>在对方程组进行求解时，fsolve会自动计算方程组的雅可比矩阵，如果方程组中的未知数很多，而与每个方程有关的未知数较少时，即雅可比矩阵比较稀疏时，传递一个计算雅可比矩阵的函数将能大幅度提高运算速度。对于上面的非线性方程组，使用雅可比矩阵的fsolve方法如下。计算雅可比矩阵的函数j通过fprime参数传递给fsolve，即 <code class="code docutils literal notranslate"><span class="pre">result</span> <span class="pre">=</span> <span class="pre">fsolve(f,</span> <span class="pre">[1,1,1],</span> <span class="pre">fprime=j)</span></code> 。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">j</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">x0</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">x1</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">x2</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">8</span><span class="o">*</span><span class="n">x0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">x2</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">x1</span><span class="o">*</span><span class="n">x2</span><span class="p">),</span> <span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">x1</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">x1</span><span class="o">*</span><span class="n">x2</span><span class="p">)],</span>
        <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">x1</span><span class="p">]</span>
        <span class="p">]</span>
</pre></div>
</div>
</section>
</section>
<section id="sphinx">
<h2>Sphinx<a class="headerlink" href="#sphinx" title="此标题的永久链接"></a></h2>
<p>Sphinx是一个静态网页发布工具，可将rST和md文件，发布为各类常见的用户帮助如联机帮助，用户手册等。</p>
<section id="id11">
<h3>快速新建项目<a class="headerlink" href="#id11" title="此标题的永久链接"></a></h3>
<p>详细内容可以参考 <a class="reference external" href="https://doclikecode.readthedocs.io/zh_CN/latest/1_sphinx/sphinx101.html#:~:text=%E5%BF%AB%E9%80%9F%E6%96%B0%E5%BB%BA%E9%A1%B9%E7%9B%AE%EF%BC%88%E4%BB%A5Mac%E7%B3%BB%E7%BB%9F%E4%B8%BA%E4%BE%8B%EF%BC%8CWindow%E7%B3%BB%E7%BB%9F%E7%B1%BB%E4%BC%BC%EF%BC%89%20%C2%B6%201%20%E5%9C%A8%E6%A1%8C%E9%9D%A2%E4%B8%8A%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E5%A4%B9%EF%BC%8C%E5%B9%B6%E5%91%BD%E5%90%8D%E4%B8%BA%20sphinx-demo%202%20%E5%9C%A8Terminal%E4%B8%AD%E6%B5%8F%E8%A7%88%E8%87%B3%E4%B8%8A%E8%BF%B0%E6%96%87%E4%BB%B6%E5%A4%B9%EF%BC%8C%E5%B9%B6%E8%BF%90%E8%A1%8C%E5%91%BD%E4%BB%A4%EF%BC%9A,sphinx-quickstart%203%20%E5%9C%A8%E5%AF%B9%E8%AF%9D%E6%A1%86%E5%BC%8F%E7%9A%84%E9%80%89%E6%8B%A9%E4%B8%AD%EF%BC%8CY%2FN%E7%9A%84%E9%80%89%E9%A1%B9%EF%BC%8C%E9%80%89Y%EF%BC%9B%E5%A6%82%E6%9E%9C%E8%AF%A2%E9%97%AE%E9%85%8D%E7%BD%AE%EF%BC%8C%E7%9B%B4%E6%8E%A5%E5%A4%8D%E5%88%B6%20%5B%5D%E4%B8%AD%E7%9A%84%E5%86%85%E5%AE%B9%EF%BC%8C%E5%A6%82%20%5B.rst%5D%EF%BC%8C%E5%88%99%E5%A1%AB%E5%86%99.rst%204%20%E6%96%B0%E5%BB%BA%E6%88%90%E5%8A%9F%E5%90%8E%EF%BC%8C%E5%88%99%E4%BC%9A%E5%BE%97%E5%88%B0%E5%A6%82%E5%9B%BE%E6%89%80%E7%A4%BA%E7%9A%84%E6%96%87%E4%BB%B6%E5%A4%B9%E7%BB%93%E6%9E%84">sphinx快速入门</a></p>
<p>首先新建希望存放项目文件的文件夹，然后在Terminal中浏览至上述文件夹，并运行命令： <code class="code docutils literal notranslate"><span class="pre">sphinx-quickstart</span></code> 。在对话框式的选择中，Y/N的选项，根据需要选Y；语言设置时，填入 <code class="code docutils literal notranslate"><span class="pre">zh-CN</span></code> 以支持中文简体。</p>
<p>新建完成后，浏览至 source 文件夹，并在其根目录下创建新文件夹demo，在demo文件夹中放置用于生成页面的rst文件。放置完成后，打开source文件中的 index.rst，将demo内的文件添加至目录中。例如</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">toctree</span><span class="p">::</span>
   <span class="nc">:maxdepth:</span> 2
   <span class="nc">:caption:</span> Contents:

   demo/电路原理.rst
   demo/数字电路.rst
</pre></div>
</div>
<p>完成后在Terminal中运行编译命令： <code class="code docutils literal notranslate"><span class="pre">sphinx-build</span> <span class="pre">-b</span> <span class="pre">html</span> <span class="pre">source</span> <span class="pre">build</span></code> ，编译成功后在 build 文件夹中则有刚才发布的网站。</p>
<p>如果需要修改网页主题，打开 source 文件夹中的conf.py，并找到主题配置行 html_theme = ‘alabaster’ ，修改该参数即可。如果要使用ReadtheDoc主题，则修改为 html_theme = ‘sphinx_rtd_theme’ 。</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF.html" class="btn btn-neutral float-left" title="数字电路" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2022, Koishi.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a>开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>